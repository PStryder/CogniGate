---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cognigate-config
  namespace: cognigate
  labels:
    app.kubernetes.io/name: cognigate
    app.kubernetes.io/component: config
data:
  # AsyncGate connection
  COGNIGATE_ASYNCGATE_ENDPOINT: "http://asyncgate.asyncgate.svc.cluster.local:8080"

  # AI Provider settings
  COGNIGATE_AI_ENDPOINT: "https://openrouter.ai/api/v1"
  COGNIGATE_AI_MODEL: "anthropic/claude-3-opus"
  COGNIGATE_AI_MAX_TOKENS: "4096"

  # Worker settings
  COGNIGATE_POLLING_INTERVAL: "5.0"
  COGNIGATE_MAX_CONCURRENT_JOBS: "2"
  COGNIGATE_JOB_TIMEOUT: "300"
  COGNIGATE_MAX_RETRIES: "3"

  # Paths (mounted via volumes)
  COGNIGATE_CONFIG_DIR: "/etc/cognigate"
  COGNIGATE_PLUGINS_DIR: "/etc/cognigate/plugins"
  COGNIGATE_PROFILES_DIR: "/etc/cognigate/profiles"

  # Server settings
  COGNIGATE_HOST: "0.0.0.0"
  COGNIGATE_PORT: "8000"

  # Authentication
  COGNIGATE_REQUIRE_AUTH: "true"
  COGNIGATE_ALLOW_INSECURE_DEV: "false"

  # Rate limiting
  COGNIGATE_RATE_LIMIT_ENABLED: "true"
  COGNIGATE_RATE_LIMIT_REQUESTS_PER_MINUTE: "50"

  # Redis for distributed rate limiting (optional)
  # COGNIGATE_REDIS_URL: "redis://redis.cognigate.svc.cluster.local:6379"

  # CORS configuration
  COGNIGATE_CORS_ALLOWED_ORIGINS: "http://localhost:3000,http://localhost:8080"
  COGNIGATE_CORS_ALLOW_CREDENTIALS: "true"
  COGNIGATE_CORS_ALLOWED_METHODS: "GET,POST,PUT,DELETE,OPTIONS"
  COGNIGATE_CORS_ALLOWED_HEADERS: "Authorization,Content-Type,X-Tenant-ID,X-API-Key"

  # Observability
  COGNIGATE_LOG_LEVEL: "INFO"
  COGNIGATE_JSON_LOGS: "true"
